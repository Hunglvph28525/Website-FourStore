<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Responsive bootstrap 4 admin template" name="description">
    <meta content="Coderthemes" name="author">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="shortcut icon" href="/assets/images/favicon.ico">
    <!-- App css -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" id="bootstrap-stylesheet">
    <link href="/assets/css/icons.min.css" rel="stylesheet" type="text/css">
    <link href="/assets/css/app.min.css" rel="stylesheet" type="text/css" id="app-stylesheet">
    <!-- third party css -->
    <link href="/assets/libs/datatables/dataTables.bootstrap4.css" rel="stylesheet" type="text/css">
    <link href="/assets/libs/datatables/buttons.bootstrap4.css" rel="stylesheet" type="text/css">
    <link href="/assets/libs/datatables/responsive.bootstrap4.css" rel="stylesheet" type="text/css">
    <link href="/assets/libs/datatables/select.bootstrap4.css" rel="stylesheet" type="text/css">



</head>

<body>


<!-- Topbar Start -->
<div th:replace="~{layout/topbar :: topbar}"></div>
<!-- end Topbar -->
<!-- ========== Left Sidebar Start ========== -->
<div th:replace="~{layout/sidebar :: sidebar}"></div>
<!-- Left Sidebar End -->

<!-- ============================================================== -->
<!-- Start Page Content here -->
<!-- ============================================================== -->

<div class="content-page bg-white">


    <!-- Start container-fluid -->
    <div class="content">
        <div class="py-1">

            <div class="row">
                <div class="col-12">
                    <div>
                        <h4 class="header-title mb-3">Khuyễn mãi</h4>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-9">


                    <h5 class="font-14">Danh sách khuyến mãi</h5>

                    <table id="responsive-datatable"
                           class="table table-bordered table-bordered "
                           style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                        <thead>
                        <tr>
                            <th>Tên khuyến mãi</th>
                            <th>Ngày bắt đầu</th>
                            <th>Ngày kết thúc</th>
                            <th>Giá trị giảm</th>
                            <th>Kiểu giảm giá</th>
                            <th>Số lượng giảm</th>
                            <th>Trạng thái</th>
                            <th>Action</th>


                        </tr>
                        </thead>

                        <tbody>
                        <tr th:each="x : ${list}">
                            <td th:text="${x.discountName}"></td>

                            <td th:text="${x.startDate}"></td>
                            <td th:text="${x.endDate}"></td>
                            <td th:text="${x.discountValue}"></td>
                            <td th:text="${x.discountType} == true?'Giảm theo phần trăm':'Giảm thẳng'"></td>

                            <td th:text="${x.quantity}"></td>
                            <td th:text="${x.status}"></td>
                            <td>
                                <a th:href="@{promotion/{id}(id=${x.id})}"><i class="mdi mdi-square-edit-outline ml-4"
                                                                              style="color: #019320;"></i></a>
                                                                <a th:href="@{promotion/update/{id}(id=${x.id})}"><i class="ti-trash ml-3" style="color: #ff0000;"></i></a>
                            </td>
                        </tr>
                        </tbody>
                    </table>

<!--                    <ul class="pagination" style="margin-left: 40%">-->
<!--                        <li class="page-item"-->
<!--                            th:classappend="${list.number == 0} ? disabled">-->
<!--                            <a class="page-link"-->
<!--                               th:href="@{/admin/promotion(page=${list.number - 1})}">-->
<!--                                Previous-->
<!--                            </a>-->
<!--                        </li>-->
<!--                        <li class="page-item"-->
<!--                            th:each="pageNumber : ${#numbers.sequence(0, list.totalPages - 1)}">-->
<!--                            <a class="page-link"-->
<!--                               th:href="@{/admin/promotion(page=${pageNumber})}"-->
<!--                               th:text="${pageNumber + 1}"-->
<!--                               th:classappend="${pageNumber == list.number} ? active">-->
<!--                            </a>-->
<!--                        </li>-->
<!--                        <li class="page-item"-->
<!--                            th:classappend="${list.number == list.totalPages - 1} ? disabled">-->
<!--                            <a class="page-link"-->
<!--                               th:href="@{/admin/promotion(page=${list.number + 1})}">-->
<!--                                Next-->
<!--                            </a>-->
<!--                        </li>-->
<!--                    </ul>-->

                </div>
                <div class="col-lg-3">
                    <h5 class="font-14">Thêm khuyến mãi mới</h5>
                    <div class="table-responsive">
                        <form class="form-horizontal" method="post" th:action="@{/admin/promotion/add}"
                              th:object="${object}">
                            <div class="form-group">
                                <label class="col-md-12 col-form-label">Chương trình khuyến mãi</label>
                                <div class="col-md-12">
                                    <input type="text" class="form-control" th:field="*{discountName}"
                                           placeholder="........."/>
                                </div>
                            </div>




                            <div class="form-group">
                                <label class="col-md-12 col-form-label">Ngày bắt đầu</label>
                                <div class="col-md-12">
                                    <input type="datetime-local" id="date"  name="date"    th:field="*{startDate}" class="form-control"/>


                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-12 col-form-label">Ngày kết thúc</label>
                                <div class="col-md-12">

                                    <input type="datetime-local" id="d"  name="d"  th:field="*{endDate}" class="form-control"/>
                                    <!--                                    <input type="datetime-local" id="date" name="date" th:field="*{endDate}" class="form-control"/>-->
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="col-md-12 col-form-label">Giá trị giảm</label>
                                <div class="col-md-12">
                                    <input type="number" th:field="*{discountValue}" class="form-control"
                                           placeholder="10"/>

                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-12 col-form-label">Kiểu giảm giá</label>
                                <div class="col-md-12">
                                    <select class="custom-select" th:field="*{discountType}">
                                        <option selected value="true">Giảm theo %</option>
                                        <option value="false">Giảm thẳng</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-12 col-form-label">Số Lượng giảm</label>
                                <div class="col-md-12">
                                    <input type="number" th:field="*{quantity}" class="form-control"
                                           placeholder="10"/>

                                    <p class="text-danger" th:if="${#fields.hasErrors('quantity')}" th:errors="*{quantity}"></p>


                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-12 col-form-label">Trạng
                                    thái</label>
                                <div class="custom-control custom-radio ml-5">
                                    <input type="radio" id="customRadio1" name="customRadio"
                                           class="custom-control-input" th:field="*{status}" value="Bật">
                                    <label class="custom-control-label" for="customRadio1">Bật</label>
                                </div>
                                <div class="custom-control custom-radio ml-5">
                                    <input type="radio" id="customRadio2" name="customRadio"
                                           class="custom-control-input" th:field="*{status}" value="Tắt">
                                    <label class="custom-control-label" for="customRadio2">Tắt</label>
                                </div>
                            </div>
                            <div class="col py-3">
                                <button class="btn btn-primary" type="submit">Save</button>
                            </div>


                        </form>
                    </div>

                </div>
            </div>


        </div>
        <!-- viết các thành phần vào đây -->

    </div>
    <!-- end container-fluid -->


    <!-- Footer Start -->
    <div th:replace="~{layout/footer :: footer}"></div>
    <!-- end Footer -->

</div>
<!-- end content -->

<!-- END content-page -->


<!-- Vendor js -->
<script src="/assets/js/vendor.min.js"></script>

<!-- Required datatable js -->
<script src="/assets/libs/datatables/jquery.dataTables.min.js"></script>
<script src="/assets/libs/datatables/dataTables.bootstrap4.min.js"></script>

<!-- Buttons examples -->
<script src="/assets/libs/datatables/dataTables.buttons.min.js"></script>
<script src="/assets/libs/datatables/buttons.bootstrap4.min.js"></script>
<script src="/assets/libs/datatables/dataTables.keyTable.min.js"></script>
<script src="/assets/libs/datatables/dataTables.select.min.js"></script>
<script src="/assets/libs/jszip/jszip.min.js"></script>
<script src="/assets/libs/pdfmake/pdfmake.min.js"></script>
<script src="/assets/libs/pdfmake/vfs_fonts.js"></script>
<script src="/assets/libs/datatables/buttons.html5.min.js"></script>
<script src="/assets/libs/datatables/buttons.print.min.js"></script>

<!-- Responsive examples -->
<script src="/assets/libs/datatables/dataTables.responsive.min.js"></script>
<script src="/assets/libs/datatables/responsive.bootstrap4.min.js"></script>

<!-- Datatabl/es init -->
<script src="/assets/js/pages/datatables.init.js"></script>

<!-- App js -->
<script src="/assets/js/app.min.js"></script>

<script>
    var dateInput = document.getElementById("date");
    var now = new Date();
    var year = now.getFullYear();
    var month = now.getMonth() + 1; // months are 0-based in JavaScript Date object
    var day = now.getDate();
    var formattedDate = year + "-" + month.toString().padStart(2, '0') + "-" + day.toString().padStart(2, '0') + "T00:00";
    dateInput.min = formattedDate;


    var dateInput = document.getElementById("d");
    var now = new Date();
    var year = now.getFullYear();
    var month = now.getMonth() + 1; // months are 0-based in JavaScript Date object
    var day = now.getDate();
    var formattedDate = year + "-" + month.toString().padStart(2, '0') + "-" + day.toString().padStart(2, '0') + "T00:00";
    dateInput.min = formattedDate;

</script>


</body>

</html>